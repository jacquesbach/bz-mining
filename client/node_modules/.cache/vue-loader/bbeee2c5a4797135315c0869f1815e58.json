{"remainingRequest":"/Users/jakobbach/Documents/bzmining/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jakobbach/Documents/bzmining/client/src/components/chart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jakobbach/Documents/bzmining/client/src/components/chart.vue","mtime":1589488394994},{"path":"/Users/jakobbach/Documents/bzmining/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jakobbach/Documents/bzmining/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jakobbach/Documents/bzmining/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jakobbach/Documents/bzmining/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKaW1wb3J0IF8gZnJvbSAibG9kYXNoIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbImlzc3VlcyJdLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFydDogbnVsbAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBpc3N1ZXModmFsKSB7CiAgICAgIGlmICh0aGlzLmNoYXJ0ICE9IG51bGwpIHRoaXMuY2hhcnQucmVtb3ZlKCk7CiAgICAgIHRoaXMucmVuZGVyQ2hhcnQodmFsKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHJlbmRlckNoYXJ0KGlzc3Vlc192YWwpIHsKICAgICAgY29uc3QgbWFyZ2luID0gNjA7CiAgICAgIGNvbnN0IHN2Z193aWR0aCA9IDEwMDA7CiAgICAgIGNvbnN0IHN2Z19oZWlnaHQgPSA2MDA7CiAgICAgIGNvbnN0IGNoYXJ0X3dpZHRoID0gMTAwMCAtIDIgKiBtYXJnaW47CiAgICAgIGNvbnN0IGNoYXJ0X2hlaWdodCA9IDYwMCAtIDIgKiBtYXJnaW47CiAgICAgIGNvbnN0IHN2ZyA9IGQzCiAgICAgICAgLnNlbGVjdCgic3ZnIikKICAgICAgICAuYXR0cigid2lkdGgiLCBzdmdfd2lkdGgpCiAgICAgICAgLmF0dHIoImhlaWdodCIsIHN2Z19oZWlnaHQpOwogICAgICB0aGlzLmNoYXJ0ID0gc3ZnCiAgICAgICAgLmFwcGVuZCgiZyIpCiAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsIGB0cmFuc2xhdGUoJHttYXJnaW59LCAke21hcmdpbn0pYCk7CiAgICAgIGNvbnN0IHlTY2FsZSA9IGQzCiAgICAgICAgLnNjYWxlTGluZWFyKCkKICAgICAgICAucmFuZ2UoW2NoYXJ0X2hlaWdodCwgMF0pCiAgICAgICAgLmRvbWFpbihbMCwgXy5tYXhCeShpc3N1ZXNfdmFsLCAiaXNzdWVzIikuaXNzdWVzXSk7CiAgICAgIHRoaXMuY2hhcnQKICAgICAgICAuYXBwZW5kKCJnIikKICAgICAgICAuY2FsbChkMy5heGlzTGVmdCh5U2NhbGUpLnRpY2tzKF8ubWF4QnkoaXNzdWVzX3ZhbCwgImlzc3VlcyIpLmlzc3VlcykpOwogICAgICBjb25zdCB4U2NhbGUgPSBkMwogICAgICAgIC5zY2FsZUJhbmQoKQogICAgICAgIC5yYW5nZShbMCwgY2hhcnRfd2lkdGhdKQogICAgICAgIC5kb21haW4oaXNzdWVzX3ZhbC5tYXAocyA9PiBzLmRheSkpCiAgICAgICAgLnBhZGRpbmcoMC4yKTsKICAgICAgdGhpcy5jaGFydAogICAgICAgIC5hcHBlbmQoImciKQogICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKDAsICR7Y2hhcnRfaGVpZ2h0fSlgKQogICAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20oeFNjYWxlKSk7CiAgICAgIGNvbnN0IGJhckdyb3VwcyA9IHRoaXMuY2hhcnQKICAgICAgICAuc2VsZWN0QWxsKCJyZWN0IikKICAgICAgICAuZGF0YShpc3N1ZXNfdmFsKQogICAgICAgIC5lbnRlcigpOwogICAgICBiYXJHcm91cHMKICAgICAgICAuYXBwZW5kKCJyZWN0IikKICAgICAgICAuYXR0cigiY2xhc3MiLCAiYmFyIikKICAgICAgICAuYXR0cigieCIsIGcgPT4geFNjYWxlKGcuZGF5KSkKICAgICAgICAuYXR0cigieSIsIGcgPT4geVNjYWxlKGcuaXNzdWVzKSkKICAgICAgICAuYXR0cigiaGVpZ2h0IiwgZyA9PiBjaGFydF9oZWlnaHQgLSB5U2NhbGUoZy5pc3N1ZXMpKQogICAgICAgIC5hdHRyKCJ3aWR0aCIsIHhTY2FsZS5iYW5kd2lkdGgoKSkKICAgICAgICAub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbihhY3R1YWwsIGkpIHsKICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKQogICAgICAgICAgICAudHJhbnNpdGlvbigpCiAgICAgICAgICAgIC5kdXJhdGlvbigzMDApCiAgICAgICAgICAgIC5hdHRyKCJvcGFjaXR5IiwgMC42KQogICAgICAgICAgICAuYXR0cigieCIsIGEgPT4geFNjYWxlKGEuZGF5KSAtIDUpCiAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIHhTY2FsZS5iYW5kd2lkdGgoKSArIDEwKTsKICAgICAgICAgIGJhckdyb3VwcwogICAgICAgICAgICAuYXBwZW5kKCJ0ZXh0IikKICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgInZhbHVlIikKICAgICAgICAgICAgLmF0dHIoIngiLCBhID0+IHhTY2FsZShhLmRheSkgKyB4U2NhbGUuYmFuZHdpZHRoKCkgLyAyKQogICAgICAgICAgICAuYXR0cigieSIsIGEgPT4geVNjYWxlKGEuaXNzdWVzKSAtIDIwKQogICAgICAgICAgICAuYXR0cigidGV4dC1hbmNob3IiLCAibWlkZGxlIikKICAgICAgICAgICAgLnRleHQoKGEsIGlkeCkgPT4gewogICAgICAgICAgICAgIHJldHVybiBpZHggIT09IGkgPyAiIiA6IGAke2EuaXNzdWVzfSBpc3N1ZXNgOwogICAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgZDMuc2VsZWN0QWxsKCIuaXNzdWVzIikuYXR0cigib3BhY2l0eSIsIDEpOwogICAgICAgICAgZDMuc2VsZWN0KHRoaXMpCiAgICAgICAgICAgIC50cmFuc2l0aW9uKCkKICAgICAgICAgICAgLmR1cmF0aW9uKDMwMCkKICAgICAgICAgICAgLmF0dHIoIm9wYWNpdHkiLCAxKQogICAgICAgICAgICAuYXR0cigieCIsIGEgPT4geFNjYWxlKGEuZGF5KSkKICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgeFNjYWxlLmJhbmR3aWR0aCgpKTsKICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoIi52YWx1ZSIpLnJlbW92ZSgpOwogICAgICAgIH0pOwogICAgICBzdmcKICAgICAgICAuYXBwZW5kKCJ0ZXh0IikKICAgICAgICAuYXR0cigiY2xhc3MiLCAibGFiZWwiKQogICAgICAgIC5hdHRyKCJ4IiwgLShjaGFydF9oZWlnaHQgLyAyKSAtIG1hcmdpbikKICAgICAgICAuYXR0cigieSIsIG1hcmdpbiAvIDIuNCkKICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInJvdGF0ZSgtOTApIikKICAgICAgICAuYXR0cigidGV4dC1hbmNob3IiLCAibWlkZGxlIikKICAgICAgICAudGV4dCgiSXNzdWVzIG9wZW5lZCIpOwogICAgICBzdmcKICAgICAgICAuYXBwZW5kKCJ0ZXh0IikKICAgICAgICAuYXR0cigiY2xhc3MiLCAibGFiZWwiKQogICAgICAgIC5hdHRyKCJ4IiwgY2hhcnRfd2lkdGggLyAyICsgbWFyZ2luKQogICAgICAgIC5hdHRyKCJ5IiwgY2hhcnRfaGVpZ2h0ICsgbWFyZ2luICogMS43KQogICAgICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsICJtaWRkbGUiKQogICAgICAgIC50ZXh0KCJEYXlzIik7CiAgICAgIHN2ZwogICAgICAgIC5hcHBlbmQoInRleHQiKQogICAgICAgIC5hdHRyKCJjbGFzcyIsICJ0aXRsZSIpCiAgICAgICAgLmF0dHIoIngiLCBjaGFydF93aWR0aCAvIDIgKyBtYXJnaW4pCiAgICAgICAgLmF0dHIoInkiLCA0MCkKICAgICAgICAuYXR0cigidGV4dC1hbmNob3IiLCAibWlkZGxlIikKICAgICAgICAudGV4dCgiSXNzdWVzIGluIHRoZSBwYXN0IDEgd2VlayIpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["chart.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chart.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <svg></svg>\n  </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\nimport _ from \"lodash\";\nexport default {\n  props: [\"issues\"],\n  data() {\n    return {\n      chart: null\n    };\n  },\n  watch: {\n    issues(val) {\n      if (this.chart != null) this.chart.remove();\n      this.renderChart(val);\n    }\n  },\n  methods: {\n    renderChart(issues_val) {\n      const margin = 60;\n      const svg_width = 1000;\n      const svg_height = 600;\n      const chart_width = 1000 - 2 * margin;\n      const chart_height = 600 - 2 * margin;\n      const svg = d3\n        .select(\"svg\")\n        .attr(\"width\", svg_width)\n        .attr(\"height\", svg_height);\n      this.chart = svg\n        .append(\"g\")\n        .attr(\"transform\", `translate(${margin}, ${margin})`);\n      const yScale = d3\n        .scaleLinear()\n        .range([chart_height, 0])\n        .domain([0, _.maxBy(issues_val, \"issues\").issues]);\n      this.chart\n        .append(\"g\")\n        .call(d3.axisLeft(yScale).ticks(_.maxBy(issues_val, \"issues\").issues));\n      const xScale = d3\n        .scaleBand()\n        .range([0, chart_width])\n        .domain(issues_val.map(s => s.day))\n        .padding(0.2);\n      this.chart\n        .append(\"g\")\n        .attr(\"transform\", `translate(0, ${chart_height})`)\n        .call(d3.axisBottom(xScale));\n      const barGroups = this.chart\n        .selectAll(\"rect\")\n        .data(issues_val)\n        .enter();\n      barGroups\n        .append(\"rect\")\n        .attr(\"class\", \"bar\")\n        .attr(\"x\", g => xScale(g.day))\n        .attr(\"y\", g => yScale(g.issues))\n        .attr(\"height\", g => chart_height - yScale(g.issues))\n        .attr(\"width\", xScale.bandwidth())\n        .on(\"mouseenter\", function(actual, i) {\n          d3.select(this)\n            .transition()\n            .duration(300)\n            .attr(\"opacity\", 0.6)\n            .attr(\"x\", a => xScale(a.day) - 5)\n            .attr(\"width\", xScale.bandwidth() + 10);\n          barGroups\n            .append(\"text\")\n            .attr(\"class\", \"value\")\n            .attr(\"x\", a => xScale(a.day) + xScale.bandwidth() / 2)\n            .attr(\"y\", a => yScale(a.issues) - 20)\n            .attr(\"text-anchor\", \"middle\")\n            .text((a, idx) => {\n              return idx !== i ? \"\" : `${a.issues} issues`;\n            });\n        })\n        .on(\"mouseleave\", function() {\n          d3.selectAll(\".issues\").attr(\"opacity\", 1);\n          d3.select(this)\n            .transition()\n            .duration(300)\n            .attr(\"opacity\", 1)\n            .attr(\"x\", a => xScale(a.day))\n            .attr(\"width\", xScale.bandwidth());\n          svg.selectAll(\".value\").remove();\n        });\n      svg\n        .append(\"text\")\n        .attr(\"class\", \"label\")\n        .attr(\"x\", -(chart_height / 2) - margin)\n        .attr(\"y\", margin / 2.4)\n        .attr(\"transform\", \"rotate(-90)\")\n        .attr(\"text-anchor\", \"middle\")\n        .text(\"Issues opened\");\n      svg\n        .append(\"text\")\n        .attr(\"class\", \"label\")\n        .attr(\"x\", chart_width / 2 + margin)\n        .attr(\"y\", chart_height + margin * 1.7)\n        .attr(\"text-anchor\", \"middle\")\n        .text(\"Days\");\n      svg\n        .append(\"text\")\n        .attr(\"class\", \"title\")\n        .attr(\"x\", chart_width / 2 + margin)\n        .attr(\"y\", 40)\n        .attr(\"text-anchor\", \"middle\")\n        .text(\"Issues in the past 1 week\");\n    }\n  }\n};\n</script>\n\n/* eslint-disable eol-last */\n"]}]}