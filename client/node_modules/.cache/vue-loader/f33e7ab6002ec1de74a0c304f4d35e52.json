{"remainingRequest":"/Users/jakobbach/Documents/bzmining/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jakobbach/Documents/bzmining/client/src/components/chart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jakobbach/Documents/bzmining/client/src/components/chart.vue","mtime":1589490310533},{"path":"/Users/jakobbach/Documents/bzmining/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jakobbach/Documents/bzmining/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jakobbach/Documents/bzmining/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jakobbach/Documents/bzmining/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJzsKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWydpc3N1ZXMnXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hhcnQ6IG51bGwsCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGlzc3Vlcyh2YWwpIHsKICAgICAgaWYgKHRoaXMuY2hhcnQgIT0gbnVsbCkgdGhpcy5jaGFydC5yZW1vdmUoKTsKICAgICAgdGhpcy5yZW5kZXJDaGFydCh2YWwpOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlbmRlckNoYXJ0KGlzc3Vlc192YWwpIHsKICAgICAgY29uc3QgbWFyZ2luID0gNjA7CiAgICAgIGNvbnN0IHN2Z193aWR0aCA9IDEwMDA7CiAgICAgIGNvbnN0IHN2Z19oZWlnaHQgPSA2MDA7CiAgICAgIGNvbnN0IGNoYXJ0X3dpZHRoID0gMTAwMCAtIDIgKiBtYXJnaW47CiAgICAgIGNvbnN0IGNoYXJ0X2hlaWdodCA9IDYwMCAtIDIgKiBtYXJnaW47CiAgICAgIGNvbnN0IHN2ZyA9IGQzCiAgICAgICAgLnNlbGVjdCgnc3ZnJykKICAgICAgICAuYXR0cignd2lkdGgnLCBzdmdfd2lkdGgpCiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHN2Z19oZWlnaHQpOwogICAgICB0aGlzLmNoYXJ0ID0gc3ZnCiAgICAgICAgLmFwcGVuZCgnZycpCiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHttYXJnaW59LCAke21hcmdpbn0pYCk7CiAgICAgIGNvbnN0IHlTY2FsZSA9IGQzCiAgICAgICAgLnNjYWxlTGluZWFyKCkKICAgICAgICAucmFuZ2UoW2NoYXJ0X2hlaWdodCwgMF0pCiAgICAgICAgLmRvbWFpbihbMCwgXy5tYXhCeShpc3N1ZXNfdmFsLCAnaXNzdWVzJykuaXNzdWVzXSk7CiAgICAgIHRoaXMuY2hhcnQKICAgICAgICAuYXBwZW5kKCdnJykKICAgICAgICAuY2FsbChkMy5heGlzTGVmdCh5U2NhbGUpLnRpY2tzKF8ubWF4QnkoaXNzdWVzX3ZhbCwgJ2lzc3VlcycpLmlzc3VlcykpOwogICAgICBjb25zdCB4U2NhbGUgPSBkMwogICAgICAgIC5zY2FsZUJhbmQoKQogICAgICAgIC5yYW5nZShbMCwgY2hhcnRfd2lkdGhdKQogICAgICAgIC5kb21haW4oaXNzdWVzX3ZhbC5tYXAoKHMpID0+IHMuZGF5KSkKICAgICAgICAucGFkZGluZygwLjIpOwogICAgICB0aGlzLmNoYXJ0CiAgICAgICAgLmFwcGVuZCgnZycpCiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoMCwgJHtjaGFydF9oZWlnaHR9KWApCiAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh4U2NhbGUpKTsKICAgICAgY29uc3QgYmFyR3JvdXBzID0gdGhpcy5jaGFydAogICAgICAgIC5zZWxlY3RBbGwoJ3JlY3QnKQogICAgICAgIC5kYXRhKGlzc3Vlc192YWwpCiAgICAgICAgLmVudGVyKCk7CiAgICAgIGJhckdyb3VwcwogICAgICAgIC5hcHBlbmQoJ3JlY3QnKQogICAgICAgIC5hdHRyKCdjbGFzcycsICdiYXInKQogICAgICAgIC5hdHRyKCd4JywgKGcpID0+IHhTY2FsZShnLmRheSkpCiAgICAgICAgLmF0dHIoJ3knLCAoZykgPT4geVNjYWxlKGcuaXNzdWVzKSkKICAgICAgICAuYXR0cignaGVpZ2h0JywgKGcpID0+IGNoYXJ0X2hlaWdodCAtIHlTY2FsZShnLmlzc3VlcykpCiAgICAgICAgLmF0dHIoJ3dpZHRoJywgeFNjYWxlLmJhbmR3aWR0aCgpKQogICAgICAgIC5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uIChhY3R1YWwsIGkpIHsKICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKQogICAgICAgICAgICAudHJhbnNpdGlvbigpCiAgICAgICAgICAgIC5kdXJhdGlvbigzMDApCiAgICAgICAgICAgIC5hdHRyKCdvcGFjaXR5JywgMC42KQogICAgICAgICAgICAuYXR0cigneCcsIChhKSA9PiB4U2NhbGUoYS5kYXkpIC0gNSkKICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgeFNjYWxlLmJhbmR3aWR0aCgpICsgMTApOwogICAgICAgICAgYmFyR3JvdXBzCiAgICAgICAgICAgIC5hcHBlbmQoJ3RleHQnKQogICAgICAgICAgICAuYXR0cignY2xhc3MnLCAndmFsdWUnKQogICAgICAgICAgICAuYXR0cigneCcsIChhKSA9PiB4U2NhbGUoYS5kYXkpICsgeFNjYWxlLmJhbmR3aWR0aCgpIC8gMikKICAgICAgICAgICAgLmF0dHIoJ3knLCAoYSkgPT4geVNjYWxlKGEuaXNzdWVzKSAtIDIwKQogICAgICAgICAgICAuYXR0cigndGV4dC1hbmNob3InLCAnbWlkZGxlJykKICAgICAgICAgICAgLnRleHQoKGEsIGlkeCkgPT4gKGlkeCAhPT0gaSA/ICcnIDogYCR7YS5pc3N1ZXN9IEFydGlrZWxgKSk7CiAgICAgICAgfSkKICAgICAgICAub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5pc3N1ZXMnKS5hdHRyKCdvcGFjaXR5JywgMSk7CiAgICAgICAgICBkMy5zZWxlY3QodGhpcykKICAgICAgICAgICAgLnRyYW5zaXRpb24oKQogICAgICAgICAgICAuZHVyYXRpb24oMzAwKQogICAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDEpCiAgICAgICAgICAgIC5hdHRyKCd4JywgKGEpID0+IHhTY2FsZShhLmRheSkpCiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHhTY2FsZS5iYW5kd2lkdGgoKSk7CiAgICAgICAgICBzdmcuc2VsZWN0QWxsKCcudmFsdWUnKS5yZW1vdmUoKTsKICAgICAgICB9KTsKICAgICAgc3ZnCiAgICAgICAgLmFwcGVuZCgndGV4dCcpCiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xhYmVsJykKICAgICAgICAuYXR0cigneCcsIC0oY2hhcnRfaGVpZ2h0IC8gMikgLSBtYXJnaW4pCiAgICAgICAgLmF0dHIoJ3knLCBtYXJnaW4gLyAyLjQpCiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICdyb3RhdGUoLTkwKScpCiAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpCiAgICAgICAgLnRleHQoJ1ZlcsO2ZmZlbnRsaWNodGUgQXJ0aWtlbCcpOwogICAgICBzdmcKICAgICAgICAuYXBwZW5kKCd0ZXh0JykKICAgICAgICAuYXR0cignY2xhc3MnLCAnbGFiZWwnKQogICAgICAgIC5hdHRyKCd4JywgY2hhcnRfd2lkdGggLyAyICsgbWFyZ2luKQogICAgICAgIC5hdHRyKCd5JywgY2hhcnRfaGVpZ2h0ICsgbWFyZ2luICogMS43KQogICAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKQogICAgICAgIC50ZXh0KCdEYXlzJyk7CiAgICAgIHN2ZwogICAgICAgIC5hcHBlbmQoJ3RleHQnKQogICAgICAgIC5hdHRyKCdjbGFzcycsICd0aXRsZScpCiAgICAgICAgLmF0dHIoJ3gnLCBjaGFydF93aWR0aCAvIDIgKyBtYXJnaW4pCiAgICAgICAgLmF0dHIoJ3knLCA0MCkKICAgICAgICAuYXR0cigndGV4dC1hbmNob3InLCAnbWlkZGxlJykKICAgICAgICAudGV4dCgnSXNzdWVzIGluIHRoZSBwYXN0IDEgd2VlaycpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["chart.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chart.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <svg></svg>\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nexport default {\n  props: ['issues'],\n  data() {\n    return {\n      chart: null,\n    };\n  },\n  watch: {\n    issues(val) {\n      if (this.chart != null) this.chart.remove();\n      this.renderChart(val);\n    },\n  },\n  methods: {\n    renderChart(issues_val) {\n      const margin = 60;\n      const svg_width = 1000;\n      const svg_height = 600;\n      const chart_width = 1000 - 2 * margin;\n      const chart_height = 600 - 2 * margin;\n      const svg = d3\n        .select('svg')\n        .attr('width', svg_width)\n        .attr('height', svg_height);\n      this.chart = svg\n        .append('g')\n        .attr('transform', `translate(${margin}, ${margin})`);\n      const yScale = d3\n        .scaleLinear()\n        .range([chart_height, 0])\n        .domain([0, _.maxBy(issues_val, 'issues').issues]);\n      this.chart\n        .append('g')\n        .call(d3.axisLeft(yScale).ticks(_.maxBy(issues_val, 'issues').issues));\n      const xScale = d3\n        .scaleBand()\n        .range([0, chart_width])\n        .domain(issues_val.map((s) => s.day))\n        .padding(0.2);\n      this.chart\n        .append('g')\n        .attr('transform', `translate(0, ${chart_height})`)\n        .call(d3.axisBottom(xScale));\n      const barGroups = this.chart\n        .selectAll('rect')\n        .data(issues_val)\n        .enter();\n      barGroups\n        .append('rect')\n        .attr('class', 'bar')\n        .attr('x', (g) => xScale(g.day))\n        .attr('y', (g) => yScale(g.issues))\n        .attr('height', (g) => chart_height - yScale(g.issues))\n        .attr('width', xScale.bandwidth())\n        .on('mouseenter', function (actual, i) {\n          d3.select(this)\n            .transition()\n            .duration(300)\n            .attr('opacity', 0.6)\n            .attr('x', (a) => xScale(a.day) - 5)\n            .attr('width', xScale.bandwidth() + 10);\n          barGroups\n            .append('text')\n            .attr('class', 'value')\n            .attr('x', (a) => xScale(a.day) + xScale.bandwidth() / 2)\n            .attr('y', (a) => yScale(a.issues) - 20)\n            .attr('text-anchor', 'middle')\n            .text((a, idx) => (idx !== i ? '' : `${a.issues} Artikel`));\n        })\n        .on('mouseleave', function () {\n          d3.selectAll('.issues').attr('opacity', 1);\n          d3.select(this)\n            .transition()\n            .duration(300)\n            .attr('opacity', 1)\n            .attr('x', (a) => xScale(a.day))\n            .attr('width', xScale.bandwidth());\n          svg.selectAll('.value').remove();\n        });\n      svg\n        .append('text')\n        .attr('class', 'label')\n        .attr('x', -(chart_height / 2) - margin)\n        .attr('y', margin / 2.4)\n        .attr('transform', 'rotate(-90)')\n        .attr('text-anchor', 'middle')\n        .text('Ver√∂ffentlichte Artikel');\n      svg\n        .append('text')\n        .attr('class', 'label')\n        .attr('x', chart_width / 2 + margin)\n        .attr('y', chart_height + margin * 1.7)\n        .attr('text-anchor', 'middle')\n        .text('Days');\n      svg\n        .append('text')\n        .attr('class', 'title')\n        .attr('x', chart_width / 2 + margin)\n        .attr('y', 40)\n        .attr('text-anchor', 'middle')\n        .text('Issues in the past 1 week');\n    },\n  },\n};\n</script>\n\n/* eslint-disable eol-last */\n"]}]}