{"remainingRequest":"/Users/jakobbach/Documents/bzmining/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jakobbach/Documents/bzmining/client/src/components/d3timeserieschart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jakobbach/Documents/bzmining/client/src/components/d3timeserieschart.vue","mtime":1589705747473},{"path":"/Users/jakobbach/Documents/bzmining/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jakobbach/Documents/bzmining/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jakobbach/Documents/bzmining/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jakobbach/Documents/bzmining/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJzsKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWydhcnRpY2xlc2F0dHJpYnV0ZSddLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFydDogbnVsbCwKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgYXJ0aWNsZXNhdHRyaWJ1dGUodmFsKSB7CiAgICAgIGlmICh0aGlzLmNoYXJ0ICE9IG51bGwpIHRoaXMuY2hhcnQucmVtb3ZlKCk7CiAgICAgIHRoaXMucmVuZGVyQ2hhcnQodmFsKTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICByZW5kZXJDaGFydChpc3N1ZXNWYWwpIHsKICAgICAgY29uc3QgbWFyZ2luID0gNjA7CiAgICAgIGNvbnN0IHN2Z1dpZHRoID0gODAwOwogICAgICBjb25zdCBzdmdIZWlnaHQgPSA1MDA7CiAgICAgIGNvbnN0IGNoYXJ0V2lkdGggPSA4MDAgLSAyICogbWFyZ2luOwogICAgICBjb25zdCBjaGFydEhlaWdodCA9IDUwMCAtIDIgKiBtYXJnaW47CiAgICAgIGNvbnN0IHN2ZyA9IGQzCiAgICAgICAgLnNlbGVjdCgnc3ZnJykKICAgICAgICAuYXR0cignd2lkdGgnLCBzdmdXaWR0aCkKICAgICAgICAuYXR0cignaGVpZ2h0Jywgc3ZnSGVpZ2h0KTsKICAgICAgdGhpcy5jaGFydCA9IHN2ZwogICAgICAgIC5hcHBlbmQoJ2cnKQogICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7bWFyZ2lufSwgJHttYXJnaW59KWApOwogICAgICBjb25zdCB5U2NhbGUgPSBkMwogICAgICAgIC5zY2FsZUxpbmVhcigpCiAgICAgICAgLnJhbmdlKFtjaGFydEhlaWdodCwgMF0pCiAgICAgICAgLmRvbWFpbihbMCwgXy5tYXhCeShpc3N1ZXNWYWwsICdjb3VudCcpLmNvdW50XSk7CiAgICAgIHRoaXMuY2hhcnQKICAgICAgICAuYXBwZW5kKCdnJykKICAgICAgICAuY2FsbChkMy5heGlzTGVmdCh5U2NhbGUpLnRpY2tzKDEwKSk7CiAgICAgIGNvbnN0IHhTY2FsZSA9IGQzCiAgICAgICAgLnNjYWxlQmFuZCgpCiAgICAgICAgLnJhbmdlKFswLCBjaGFydFdpZHRoXSkKICAgICAgICAuZG9tYWluKGlzc3Vlc1ZhbC5tYXAoKHMpID0+IHMuZGF0ZSkpCiAgICAgICAgLnBhZGRpbmcoMC4yKTsKICAgICAgdGhpcy5jaGFydAogICAgICAgIC5hcHBlbmQoJ2cnKQogICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsICR7Y2hhcnRIZWlnaHR9KWApCiAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh4U2NhbGUpKTsKICAgICAgY29uc3QgYmFyR3JvdXBzID0gdGhpcy5jaGFydAogICAgICAgIC5zZWxlY3RBbGwoJ3JlY3QnKQogICAgICAgIC5kYXRhKGlzc3Vlc1ZhbCkKICAgICAgICAuZW50ZXIoKTsKICAgICAgYmFyR3JvdXBzCiAgICAgICAgLmFwcGVuZCgncmVjdCcpCiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2JhcicpCiAgICAgICAgLmF0dHIoJ3gnLCAoZykgPT4geFNjYWxlKGcuZGF0ZSkpCiAgICAgICAgLmF0dHIoJ3knLCAoZykgPT4geVNjYWxlKGcuY291bnQpKQogICAgICAgIC5hdHRyKCdoZWlnaHQnLCAoZykgPT4gY2hhcnRIZWlnaHQgLSB5U2NhbGUoZy5jb3VudCkpCiAgICAgICAgLmF0dHIoJ3dpZHRoJywgeFNjYWxlLmJhbmR3aWR0aCgpKQogICAgICAgIC5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uIChhY3R1YWwsIGkpIHsKICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKQogICAgICAgICAgICAudHJhbnNpdGlvbigpCiAgICAgICAgICAgIC5kdXJhdGlvbigzMDApCiAgICAgICAgICAgIC5hdHRyKCdvcGFjaXR5JywgMC42KQogICAgICAgICAgICAuYXR0cigneCcsIChhKSA9PiB4U2NhbGUoYS5kYXRlKSAtIDUpCiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHhTY2FsZS5iYW5kd2lkdGgoKSArIDEwKTsKICAgICAgICAgIGJhckdyb3VwcwogICAgICAgICAgICAuYXBwZW5kKCd0ZXh0JykKICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ZhbHVlJykKICAgICAgICAgICAgLmF0dHIoJ3gnLCAoYSkgPT4geFNjYWxlKGEuZGF0ZSkgKyB4U2NhbGUuYmFuZHdpZHRoKCkgLyA0KQogICAgICAgICAgICAuYXR0cigneScsIChhKSA9PiB5U2NhbGUoYS5jb3VudCkgLSAyMCkKICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpCiAgICAgICAgICAgIC50ZXh0KChhLCBpZHgpID0+IChpZHggIT09IGkgPyAnJyA6IGAke2EuY291bnR9IEFydGlrZWwgYW0gJHthLmRhdGV9YCkpOwogICAgICAgIH0pCiAgICAgICAgLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY291bnQnKS5hdHRyKCdvcGFjaXR5JywgMSk7CiAgICAgICAgICBkMy5zZWxlY3QodGhpcykKICAgICAgICAgICAgLnRyYW5zaXRpb24oKQogICAgICAgICAgICAuZHVyYXRpb24oMzAwKQogICAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDEpCiAgICAgICAgICAgIC5hdHRyKCd4JywgKGEpID0+IHhTY2FsZShhLmRhdGUpKQogICAgICAgICAgICAuYXR0cignd2lkdGgnLCB4U2NhbGUuYmFuZHdpZHRoKCkpOwogICAgICAgICAgc3ZnLnNlbGVjdEFsbCgnLnZhbHVlJykucmVtb3ZlKCk7CiAgICAgICAgfSk7CiAgICAgIHN2ZwogICAgICAgIC5hcHBlbmQoJ3RleHQnKQogICAgICAgIC5hdHRyKCdjbGFzcycsICdsYWJlbCcpCiAgICAgICAgLmF0dHIoJ3gnLCAtKGNoYXJ0SGVpZ2h0IC8gMikgLSBtYXJnaW4pCiAgICAgICAgLmF0dHIoJ3knLCBtYXJnaW4gLyAyLjQpCiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICdyb3RhdGUoLTkwKScpCiAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpCiAgICAgICAgLnRleHQoJ1ZlcsO2ZmZlbnRsaWNodGUgQXJ0aWtlbCcpOwogICAgICBzdmcKICAgICAgICAuYXBwZW5kKCd0ZXh0JykKICAgICAgICAuYXR0cignY2xhc3MnLCAnbGFiZWwnKQogICAgICAgIC5hdHRyKCd4JywgY2hhcnRXaWR0aCAvIDIgKyBtYXJnaW4pCiAgICAgICAgLmF0dHIoJ3knLCBjaGFydEhlaWdodCArIG1hcmdpbiAqIDEuNykKICAgICAgICAuYXR0cigndGV4dC1hbmNob3InLCAnbWlkZGxlJykKICAgICAgICAudGV4dCgnRGF0dW0nKTsKICAgICAgc3ZnCiAgICAgICAgLmFwcGVuZCgndGV4dCcpCiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RpdGxlJykKICAgICAgICAuYXR0cigneCcsIGNoYXJ0V2lkdGggLyAyICsgbWFyZ2luKQogICAgICAgIC5hdHRyKCd5JywgNDApCiAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpCiAgICAgICAgLnRleHQoJ1ZlcsO2ZmZlbnRsaWNodGUgQXJ0aWtlbCBzZWl0IGRlbSA4LjIuMjAyMCcpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["d3timeserieschart.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"d3timeserieschart.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <svg></svg>\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nexport default {\n  props: ['articlesattribute'],\n  data() {\n    return {\n      chart: null,\n    };\n  },\n  watch: {\n    articlesattribute(val) {\n      if (this.chart != null) this.chart.remove();\n      this.renderChart(val);\n    },\n  },\n  methods: {\n    renderChart(issuesVal) {\n      const margin = 60;\n      const svgWidth = 800;\n      const svgHeight = 500;\n      const chartWidth = 800 - 2 * margin;\n      const chartHeight = 500 - 2 * margin;\n      const svg = d3\n        .select('svg')\n        .attr('width', svgWidth)\n        .attr('height', svgHeight);\n      this.chart = svg\n        .append('g')\n        .attr('transform', `translate(${margin}, ${margin})`);\n      const yScale = d3\n        .scaleLinear()\n        .range([chartHeight, 0])\n        .domain([0, _.maxBy(issuesVal, 'count').count]);\n      this.chart\n        .append('g')\n        .call(d3.axisLeft(yScale).ticks(10));\n      const xScale = d3\n        .scaleBand()\n        .range([0, chartWidth])\n        .domain(issuesVal.map((s) => s.date))\n        .padding(0.2);\n      this.chart\n        .append('g')\n        .attr('transform', `translate(0, ${chartHeight})`)\n        .call(d3.axisBottom(xScale));\n      const barGroups = this.chart\n        .selectAll('rect')\n        .data(issuesVal)\n        .enter();\n      barGroups\n        .append('rect')\n        .attr('class', 'bar')\n        .attr('x', (g) => xScale(g.date))\n        .attr('y', (g) => yScale(g.count))\n        .attr('height', (g) => chartHeight - yScale(g.count))\n        .attr('width', xScale.bandwidth())\n        .on('mouseenter', function (actual, i) {\n          d3.select(this)\n            .transition()\n            .duration(300)\n            .attr('opacity', 0.6)\n            .attr('x', (a) => xScale(a.date) - 5)\n            .attr('width', xScale.bandwidth() + 10);\n          barGroups\n            .append('text')\n            .attr('class', 'value')\n            .attr('x', (a) => xScale(a.date) + xScale.bandwidth() / 4)\n            .attr('y', (a) => yScale(a.count) - 20)\n            .attr('text-anchor', 'middle')\n            .text((a, idx) => (idx !== i ? '' : `${a.count} Artikel am ${a.date}`));\n        })\n        .on('mouseleave', function () {\n          d3.selectAll('.count').attr('opacity', 1);\n          d3.select(this)\n            .transition()\n            .duration(300)\n            .attr('opacity', 1)\n            .attr('x', (a) => xScale(a.date))\n            .attr('width', xScale.bandwidth());\n          svg.selectAll('.value').remove();\n        });\n      svg\n        .append('text')\n        .attr('class', 'label')\n        .attr('x', -(chartHeight / 2) - margin)\n        .attr('y', margin / 2.4)\n        .attr('transform', 'rotate(-90)')\n        .attr('text-anchor', 'middle')\n        .text('Veröffentlichte Artikel');\n      svg\n        .append('text')\n        .attr('class', 'label')\n        .attr('x', chartWidth / 2 + margin)\n        .attr('y', chartHeight + margin * 1.7)\n        .attr('text-anchor', 'middle')\n        .text('Datum');\n      svg\n        .append('text')\n        .attr('class', 'title')\n        .attr('x', chartWidth / 2 + margin)\n        .attr('y', 40)\n        .attr('text-anchor', 'middle')\n        .text('Veröffentlichte Artikel seit dem 8.2.2020');\n    },\n  },\n};\n</script>\n\n/* eslint-disable camelcase */\n"]}]}